module.exports=[7827,a=>{"use strict";var b=a.i(72131);a.i(87924);var c=b.createContext(void 0);function d(a){let d=b.useContext(c);return a||d||"ltr"}a.s(["useDirection",()=>d])},65733,a=>{"use strict";var b=a.i(87924),c=a.i(97942),d=a.i(22262),e=a.i(97895);function f({...a}){return(0,b.jsx)(c.Root,{"data-slot":"dialog",...a})}function g({...a}){return(0,b.jsx)(c.Trigger,{"data-slot":"dialog-trigger",...a})}function h({...a}){return(0,b.jsx)(c.Portal,{"data-slot":"dialog-portal",...a})}function i({className:a,...d}){return(0,b.jsx)(c.Overlay,{"data-slot":"dialog-overlay",className:(0,e.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...d})}function j({className:a,children:f,showCloseButton:g=!0,...j}){return(0,b.jsxs)(h,{"data-slot":"dialog-portal",children:[(0,b.jsx)(i,{}),(0,b.jsxs)(c.Content,{"data-slot":"dialog-content",className:(0,e.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...j,children:[f,g&&(0,b.jsxs)(c.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,b.jsx)(d.XIcon,{}),(0,b.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function k({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"dialog-header",className:(0,e.cn)("flex flex-col gap-2 text-center sm:text-left",a),...c})}function l({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"dialog-footer",className:(0,e.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...c})}function m({className:a,...d}){return(0,b.jsx)(c.Title,{"data-slot":"dialog-title",className:(0,e.cn)("text-lg leading-none font-semibold",a),...d})}function n({className:a,...d}){return(0,b.jsx)(c.Description,{"data-slot":"dialog-description",className:(0,e.cn)("text-muted-foreground text-sm",a),...d})}a.s(["Dialog",()=>f,"DialogContent",()=>j,"DialogDescription",()=>n,"DialogFooter",()=>l,"DialogHeader",()=>k,"DialogTitle",()=>m,"DialogTrigger",()=>g])},15618,a=>{"use strict";let b=(0,a.i(70106).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},88237,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...d})})}function e({className:a,...d}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...d})}function f({className:a,...d}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...d})}function g({className:a,...d}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...d})}function h({className:a,...d}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function i({className:a,...d}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}a.s(["Table",()=>d,"TableBody",()=>f,"TableCell",()=>i,"TableHead",()=>h,"TableHeader",()=>e,"TableRow",()=>g])},54161,a=>{"use strict";var b=a.i(87924),c=a.i(11011),d=a.i(187),e=a.i(97895);let f=(0,d.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function g({className:a,variant:d,asChild:g=!1,...h}){let i=g?c.Slot:"span";return(0,b.jsx)(i,{"data-slot":"badge",className:(0,e.cn)(f({variant:d}),a),...h})}a.s(["Badge",()=>g])},6406,a=>{"use strict";let b=(0,a.i(70106).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["CheckIcon",()=>b],6406)},5522,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...e})}a.s(["Input",()=>d])},17171,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(30553),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(97895);function g({className:a,...c}){return(0,b.jsx)(e,{"data-slot":"label",className:(0,f.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a.s(["Label",()=>g],17171)},40695,a=>{"use strict";var b=a.i(87924),c=a.i(11011),d=a.i(187),e=a.i(97895);let f=(0,d.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function g({className:a,variant:d,size:g,asChild:h=!1,...i}){let j=h?c.Slot:"button";return(0,b.jsx)(j,{"data-slot":"button",className:(0,e.cn)(f({variant:d,size:g,className:a})),...i})}a.s(["Button",()=>g])},83077,a=>{"use strict";let b=(0,a.i(70106).default)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);a.s(["Trophy",()=>b],83077)},92843,a=>{"use strict";var b=a.i(72131),c=a.i(72752),d=b["useId".toString()]||(()=>void 0),e=0;function f(a){let[f,g]=b.useState(d());return(0,c.useLayoutEffect)(()=>{a||g(a=>a??String(e++))},[a]),a||(f?`radix-${f}`:"")}a.s(["useId",()=>f])},20005,a=>{"use strict";let b=(0,a.i(70106).default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);a.s(["LogOut",()=>b],20005)},77994,a=>{"use strict";var b=a.i(72131);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},81560,a=>{"use strict";let b=(0,a.i(70106).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],81560)},24569,a=>{"use strict";let b=(0,a.i(70106).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);a.s(["Edit",()=>b],24569)},47468,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(67301),f=a.i(14727),g=a.i(40695),h=a.i(5522),i=a.i(17171),j=a.i(65733),k=a.i(87682),l=a.i(88237),m=a.i(54161),n=a.i(15618),o=a.i(81560),p=a.i(24569),q=a.i(1549);function r(){let a=(0,d.useRouter)(),[r,s]=(0,c.useState)([]),[t,u]=(0,c.useState)(!0),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)({email:"",password:"",role:"admin"}),B=(0,c.useCallback)(async()=>{try{let b=localStorage.getItem("admin_token");if(!b)return void a.push("/admin/login");let c=await fetch("/api/admin/users",{headers:{Authorization:`Bearer ${b}`}});if(401===c.status){localStorage.removeItem("admin_token"),a.push("/admin/login");return}if(c.ok){let a=await c.json();s(Array.isArray(a.users)?a.users:[])}else{let a=await c.json().catch(()=>({}));console.error("Failed to fetch users:",a.error||c.statusText),s([])}}catch(a){console.error("Failed to fetch users:",a),s([])}finally{u(!1)}},[a]);(0,c.useEffect)(()=>{B()},[B]);let C=async a=>{a.preventDefault();let b=localStorage.getItem("admin_token");try{let a=x?`/api/admin/users/${x.id}`:"/api/admin/users",c=x?"PUT":"POST",d={email:z.email,role:z.role};(!x||z.password)&&(d.password=z.password);let e=await fetch(a,{method:c,headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify(d)});if(e.ok)w(!1),y(null),A({email:"",password:"",role:"admin"}),B();else{let a=await e.json();alert(a.error||"Failed to save user")}}catch(a){console.error("Failed to save user:",a),alert("Failed to save user")}},D=async a=>{if(!confirm("Are you sure you want to delete this admin user?"))return;let b=localStorage.getItem("admin_token");try{let c=await fetch(`/api/admin/users/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`}});if(c.ok)B();else{let a=await c.json();alert(a.error||"Failed to delete user")}}catch(a){console.error("Failed to delete user:",a),alert("Failed to delete user")}};return t?(0,b.jsxs)(f.SidebarProvider,{children:[(0,b.jsx)(e.AdminNav,{}),(0,b.jsxs)(f.SidebarInset,{children:[(0,b.jsxs)("header",{className:"flex h-16 items-center gap-2 border-b bg-background px-4",children:[(0,b.jsx)(f.SidebarTrigger,{}),(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Admin Users"})]}),(0,b.jsx)("div",{className:"container mx-auto p-6",children:(0,b.jsx)("p",{children:"Loading..."})})]})]}):(0,b.jsxs)(f.SidebarProvider,{children:[(0,b.jsx)(e.AdminNav,{}),(0,b.jsxs)(f.SidebarInset,{className:"min-w-0",children:[(0,b.jsxs)("header",{className:"flex h-16 items-center gap-2 border-b bg-background px-4",children:[(0,b.jsx)(f.SidebarTrigger,{}),(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Admin Users"})]}),(0,b.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,b.jsxs)("div",{className:"mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Admin Users"}),(0,b.jsxs)(g.Button,{onClick:()=>{y(null),A({email:"",password:"",role:"admin"}),w(!0)},className:"w-full sm:w-auto",children:[(0,b.jsx)(n.Plus,{className:"mr-2 h-4 w-4"}),"Add Admin User"]})]}),(0,b.jsx)("div",{className:"w-full overflow-x-auto rounded-lg border bg-card",children:(0,b.jsxs)(l.Table,{children:[(0,b.jsx)(l.TableHeader,{children:(0,b.jsxs)(l.TableRow,{children:[(0,b.jsx)(l.TableHead,{className:"whitespace-nowrap",children:"Email"}),(0,b.jsx)(l.TableHead,{className:"whitespace-nowrap",children:"Role"}),(0,b.jsx)(l.TableHead,{className:"whitespace-nowrap",children:"Created At"}),(0,b.jsx)(l.TableHead,{className:"text-right whitespace-nowrap",children:"Actions"})]})}),(0,b.jsx)(l.TableBody,{children:r.map(a=>(0,b.jsxs)(l.TableRow,{children:[(0,b.jsx)(l.TableCell,{className:"font-medium whitespace-nowrap",children:a.email}),(0,b.jsx)(l.TableCell,{className:"whitespace-nowrap",children:(0,b.jsx)(m.Badge,{className:(a=>{switch(a){case"super_admin":return"bg-red-500";case"admin":return"bg-blue-500";case"moderator":return"bg-green-500";default:return"bg-gray-500"}})(a.role),children:a.role.replace("_"," ")})}),(0,b.jsx)(l.TableCell,{className:"whitespace-nowrap",children:new Date(a.created_at).toLocaleDateString()}),(0,b.jsxs)(l.TableCell,{className:"text-right whitespace-nowrap",children:[(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",onClick:()=>{y(a),A({email:a.email,password:"",role:a.role}),w(!0)},children:(0,b.jsx)(p.Edit,{className:"h-4 w-4"})}),(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",onClick:()=>D(a.id),children:(0,b.jsx)(o.Trash2,{className:"h-4 w-4 text-destructive"})})]})]},a.id))})]})}),(0,b.jsx)(j.Dialog,{open:v,onOpenChange:w,children:(0,b.jsxs)(j.DialogContent,{children:[(0,b.jsxs)(j.DialogHeader,{children:[(0,b.jsx)(j.DialogTitle,{children:x?"Edit Admin User":"Add Admin User"}),(0,b.jsx)(j.DialogDescription,{children:x?"Update admin user details and permissions":"Create a new admin user with specific role and permissions"})]}),(0,b.jsxs)("form",{onSubmit:C,children:[(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"email",children:"Email"}),(0,b.jsx)(h.Input,{id:"email",type:"email",value:z.email,onChange:a=>A({...z,email:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(i.Label,{htmlFor:"password",children:["Password ",x&&"(leave blank to keep current)"]}),(0,b.jsx)(h.Input,{id:"password",type:"password",value:z.password,onChange:a=>A({...z,password:a.target.value}),required:!x})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"role",children:"Role"}),(0,b.jsxs)(k.Select,{value:z.role,onValueChange:a=>A({...z,role:a}),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"super_admin",children:"Super Admin"}),(0,b.jsx)(k.SelectItem,{value:"admin",children:"Admin"}),(0,b.jsx)(k.SelectItem,{value:"moderator",children:"Moderator"})]})]}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["super_admin"===z.role&&"Full access to all features including user management","admin"===z.role&&"Can manage subjects, words, and view players","moderator"===z.role&&"Can edit subjects and manage words"]})]})]}),(0,b.jsxs)(j.DialogFooter,{children:[(0,b.jsx)(g.Button,{type:"button",variant:"outline",onClick:()=>w(!1),children:"Cancel"}),(0,b.jsx)(g.Button,{type:"submit",children:x?"Update":"Create"})]})]})]})}),(0,b.jsx)(q.AdminFooter,{})]})]})]})}a.s(["default",()=>r])}];

//# sourceMappingURL=_4a1c19d5._.js.map