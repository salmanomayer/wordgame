module.exports=[63830,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(67301),f=a.i(14727),g=a.i(88237),h=a.i(3130),i=a.i(5522),j=a.i(17171),k=a.i(87682),l=a.i(54161),m=a.i(40695),n=a.i(13749),o=a.i(50522),p=a.i(18341),q=a.i(31746),r=a.i(10448),s=a.i(81560),t=a.i(9941),u=a.i(95490),v=a.i(85668),w=a.i(77687),x=a.i(65733),y=a.i(1549);function z(){let[a,z]=(0,c.useState)([]),[A,B]=(0,c.useState)([]),[C,D]=(0,c.useState)(!0),[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)("all"),[I,J]=(0,c.useState)(1),[K,L]=(0,c.useState)("20"),[M,N]=(0,c.useState)(0),[O,P]=(0,c.useState)("created_at"),[Q,R]=(0,c.useState)("desc"),[S,T]=(0,c.useState)(null),[U,V]=(0,c.useState)(null),[W,X]=(0,c.useState)(!1),[Y,Z]=(0,c.useState)(!1),[$,_]=(0,c.useState)({word:"",hint:"",subject_id:"",is_active:!0}),aa=(0,d.useRouter)(),{toast:ab}=(0,w.useToast)(),ac=(0,c.useCallback)(async()=>{let a=localStorage.getItem("admin_token");if(!a)return void aa.push("/admin/login");try{let b=await fetch("/api/admin/subjects",{headers:{Authorization:`Bearer ${a}`}});if(!b.ok){let a=await b.json().catch(()=>({}));throw Error(a.error||"Failed to fetch subjects")}let c=await b.json();z(Array.isArray(c)?c:[])}catch(a){console.error("[v0] Error fetching subjects:",a),z([]),ab({variant:"destructive",title:"Error",description:a instanceof Error?a.message:"Could not load subjects"})}},[aa]),ad=(0,c.useCallback)(async(a,b,c,d,e,f)=>{let g=localStorage.getItem("admin_token");if(!g)return void aa.push("/admin/login");let h=new URLSearchParams,i=a.trim();i&&h.set("q",i),b&&"all"!==b&&h.set("subject_id",b),h.set("page",c.toString()),h.set("limit",d),h.set("sort_by",e),h.set("sort_order",f);try{let a=await fetch(`/api/admin/words?${h.toString()}`,{headers:{Authorization:`Bearer ${g}`}});if(!a.ok){let b=await a.json().catch(()=>({}));throw Error(b.error||"Failed to fetch words")}let b=await a.json();B(Array.isArray(b.data)?b.data:[]),N(b.total||0)}catch(a){console.error("[v0] Error fetching words:",a),B([]),N(0),ab({variant:"destructive",title:"Error",description:a instanceof Error?a.message:"Could not load words"})}finally{D(!1)}},[aa]);(0,c.useEffect)(()=>{localStorage.getItem("admin_token")?ac():aa.push("/admin/login")},[aa,ac]),(0,c.useEffect)(()=>{D(!0);let a=setTimeout(()=>{ad(E,G,I,K,O,Q)},250);return()=>clearTimeout(a)},[ad,E,G,I,K,O,Q]);let ae=a=>{O===a?R("asc"===Q?"desc":"asc"):(P(a),R("asc")),J(1)},af=async a=>{V(a),Z(!0)},ag=async()=>{if(!U)return;let a=localStorage.getItem("admin_token");try{if(!(await fetch(`/api/admin/words/${U.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}})).ok)throw Error("Failed to delete word");ab({title:"Success",description:"Word deleted successfully"}),ad(E,G,I,K,O,Q)}catch(a){ab({title:"Error",description:"Failed to delete word",variant:"destructive"})}finally{Z(!1),V(null)}},ah=async()=>{if(!S)return;let a=localStorage.getItem("admin_token");try{if(!(await fetch(`/api/admin/words/${S.id}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify($)})).ok)throw Error("Failed to update word");ab({title:"Success",description:"Word updated successfully"}),ad(E,G,I,K,O,Q)}catch(a){ab({title:"Error",description:"Failed to update word",variant:"destructive"})}finally{X(!1),T(null)}};return C?(0,b.jsxs)(f.SidebarProvider,{children:[(0,b.jsx)(e.AdminNav,{}),(0,b.jsxs)(f.SidebarInset,{className:"bg-muted/40",children:[(0,b.jsxs)("header",{className:"flex h-16 items-center gap-2 border-b bg-background px-4",children:[(0,b.jsx)(f.SidebarTrigger,{}),(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Words"})]}),(0,b.jsx)("div",{className:"flex min-h-[calc(100svh-4rem)] items-center justify-center",children:(0,b.jsx)("div",{className:"text-lg",children:"Loading..."})})]})]}):(0,b.jsxs)(f.SidebarProvider,{children:[(0,b.jsx)(e.AdminNav,{}),(0,b.jsxs)(f.SidebarInset,{className:"min-w-0 bg-muted/40",children:[(0,b.jsxs)("header",{className:"flex h-16 items-center gap-2 border-b bg-background px-4",children:[(0,b.jsx)(f.SidebarTrigger,{}),(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Words"})]}),(0,b.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,b.jsx)("div",{className:"mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Word Management"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Add, edit, and manage your word database"})]})}),(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(h.CardTitle,{children:"Search & Filters"})}),(0,b.jsxs)(h.CardContent,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"word-search",children:"Search"}),(0,b.jsx)(i.Input,{id:"word-search",value:E,onChange:a=>F(a.target.value),placeholder:"Search word, hint, or subject..."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Subject"}),(0,b.jsxs)(k.Select,{value:G,onValueChange:a=>H(a),children:[(0,b.jsx)(k.SelectTrigger,{className:"w-full",children:(0,b.jsx)(k.SelectValue,{placeholder:"All subjects"})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"all",children:"All subjects"}),a.map(a=>(0,b.jsx)(k.SelectItem,{value:a.id,children:a.name},a.id))]})]})]})]}),(0,b.jsx)("div",{className:"w-full overflow-x-auto rounded-md border",children:(0,b.jsxs)(g.Table,{children:[(0,b.jsx)(g.TableHeader,{children:(0,b.jsxs)(g.TableRow,{children:[(0,b.jsx)(g.TableHead,{className:"cursor-pointer select-none whitespace-nowrap",onClick:()=>ae("word"),children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:["Word","word"===O?"asc"===Q?(0,b.jsx)(u.ArrowUp,{className:"h-4 w-4"}):(0,b.jsx)(v.ArrowDown,{className:"h-4 w-4"}):(0,b.jsx)(t.ArrowUpDown,{className:"h-4 w-4 text-muted-foreground/50"})]})}),(0,b.jsx)(g.TableHead,{className:"cursor-pointer select-none whitespace-nowrap",onClick:()=>ae("hint"),children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:["Hint","hint"===O?"asc"===Q?(0,b.jsx)(u.ArrowUp,{className:"h-4 w-4"}):(0,b.jsx)(v.ArrowDown,{className:"h-4 w-4"}):(0,b.jsx)(t.ArrowUpDown,{className:"h-4 w-4 text-muted-foreground/50"})]})}),(0,b.jsx)(g.TableHead,{className:"cursor-pointer select-none whitespace-nowrap",onClick:()=>ae("subject_name"),children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:["Subject","subject_name"===O?"asc"===Q?(0,b.jsx)(u.ArrowUp,{className:"h-4 w-4"}):(0,b.jsx)(v.ArrowDown,{className:"h-4 w-4"}):(0,b.jsx)(t.ArrowUpDown,{className:"h-4 w-4 text-muted-foreground/50"})]})}),(0,b.jsx)(g.TableHead,{className:"whitespace-nowrap",children:"Status"}),(0,b.jsx)(g.TableHead,{className:"cursor-pointer select-none whitespace-nowrap",onClick:()=>ae("created_at"),children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:["Created","created_at"===O?"asc"===Q?(0,b.jsx)(u.ArrowUp,{className:"h-4 w-4"}):(0,b.jsx)(v.ArrowDown,{className:"h-4 w-4"}):(0,b.jsx)(t.ArrowUpDown,{className:"h-4 w-4 text-muted-foreground/50"})]})}),(0,b.jsx)(g.TableHead,{className:"text-right whitespace-nowrap",children:"Actions"})]})}),(0,b.jsx)(g.TableBody,{children:0===A.length?(0,b.jsx)(g.TableRow,{children:(0,b.jsx)(g.TableCell,{colSpan:6,className:"text-center",children:"No words found"})}):A.map(a=>(0,b.jsxs)(g.TableRow,{children:[(0,b.jsx)(g.TableCell,{className:"font-medium whitespace-nowrap",children:a.word}),(0,b.jsx)(g.TableCell,{className:"whitespace-nowrap",children:a.hint||""}),(0,b.jsx)(g.TableCell,{className:"whitespace-nowrap",children:a.subject_name||""}),(0,b.jsx)(g.TableCell,{className:"whitespace-nowrap",children:(0,b.jsx)(l.Badge,{variant:a.is_active?"default":"secondary",children:a.is_active?"Active":"Inactive"})}),(0,b.jsx)(g.TableCell,{className:"whitespace-nowrap",children:new Date(a.created_at).toLocaleDateString()}),(0,b.jsx)(g.TableCell,{className:"text-right whitespace-nowrap",children:(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(m.Button,{variant:"ghost",size:"icon",onClick:()=>{T(a),_({word:a.word,hint:a.hint||"",subject_id:a.subject_id,is_active:a.is_active}),X(!0)},children:(0,b.jsx)(r.Edit2,{className:"h-4 w-4"})}),(0,b.jsx)(m.Button,{variant:"ghost",size:"icon",className:"text-destructive",onClick:()=>af(a),children:(0,b.jsx)(s.Trash2,{className:"h-4 w-4"})})]})})]},a.id))})]})}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 py-4 mt-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("p",{className:"text-sm font-medium whitespace-nowrap",children:"Rows per page"}),(0,b.jsxs)(k.Select,{value:K,onValueChange:a=>{L(a),J(1)},children:[(0,b.jsx)(k.SelectTrigger,{className:"h-8 w-[70px]",children:(0,b.jsx)(k.SelectValue,{placeholder:K})}),(0,b.jsx)(k.SelectContent,{side:"top",children:["20","50","100","all"].map(a=>(0,b.jsx)(k.SelectItem,{value:a,children:"all"===a?"All":a},a))})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",I," of ","all"===K?1:Math.ceil(M/parseInt(K))||1]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsxs)(m.Button,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>J(1),disabled:1===I,children:[(0,b.jsx)("span",{className:"sr-only",children:"Go to first page"}),(0,b.jsx)(p.ChevronsLeft,{className:"h-4 w-4"})]}),(0,b.jsxs)(m.Button,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>J(I-1),disabled:1===I,children:[(0,b.jsx)("span",{className:"sr-only",children:"Go to previous page"}),(0,b.jsx)(n.ChevronLeft,{className:"h-4 w-4"})]}),(0,b.jsxs)(m.Button,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>J(I+1),disabled:"all"===K||I>=Math.ceil(M/parseInt(K)),children:[(0,b.jsx)("span",{className:"sr-only",children:"Go to next page"}),(0,b.jsx)(o.ChevronRight,{className:"h-4 w-4"})]}),(0,b.jsxs)(m.Button,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>J(Math.ceil(M/parseInt(K))),disabled:"all"===K||I>=Math.ceil(M/parseInt(K)),children:[(0,b.jsx)("span",{className:"sr-only",children:"Go to last page"}),(0,b.jsx)(q.ChevronsRight,{className:"h-4 w-4"})]})]})]})]})]})]})]}),(0,b.jsx)(x.Dialog,{open:W,onOpenChange:X,children:(0,b.jsxs)(x.DialogContent,{children:[(0,b.jsx)(x.DialogHeader,{children:(0,b.jsx)(x.DialogTitle,{children:"Edit Word"})}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"edit-word",children:"Word"}),(0,b.jsx)(i.Input,{id:"edit-word",value:$.word,onChange:a=>_({...$,word:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"edit-hint",children:"Hint"}),(0,b.jsx)(i.Input,{id:"edit-hint",value:$.hint,onChange:a=>_({...$,hint:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Subject"}),(0,b.jsxs)(k.Select,{value:$.subject_id,onValueChange:a=>_({...$,subject_id:a}),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Select subject"})}),(0,b.jsx)(k.SelectContent,{children:a.map(a=>(0,b.jsx)(k.SelectItem,{value:a.id,children:a.name},a.id))})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"edit-active",checked:$.is_active,onChange:a=>_({...$,is_active:a.target.checked}),className:"h-4 w-4 rounded border-gray-300"}),(0,b.jsx)(j.Label,{htmlFor:"edit-active",children:"Active"})]})]}),(0,b.jsxs)(x.DialogFooter,{children:[(0,b.jsx)(m.Button,{variant:"outline",onClick:()=>X(!1),children:"Cancel"}),(0,b.jsx)(m.Button,{onClick:ah,children:"Save Changes"})]})]})}),(0,b.jsx)(x.Dialog,{open:Y,onOpenChange:Z,children:(0,b.jsxs)(x.DialogContent,{children:[(0,b.jsxs)(x.DialogHeader,{children:[(0,b.jsx)(x.DialogTitle,{children:"Delete Word"}),(0,b.jsxs)(x.DialogDescription,{children:["Are you sure you want to delete the word ",U?.word,"? This action cannot be undone."]})]}),(0,b.jsxs)(x.DialogFooter,{children:[(0,b.jsx)(m.Button,{variant:"outline",onClick:()=>Z(!1),children:"Cancel"}),(0,b.jsx)(m.Button,{variant:"destructive",onClick:ag,children:"Delete"})]})]})}),(0,b.jsx)(y.AdminFooter,{})]})]})}a.s(["default",()=>z])}];

//# sourceMappingURL=app_admin_words_page_tsx_66c44e89._.js.map