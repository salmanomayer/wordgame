(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23750,e=>{"use strict";var a=e.i(43476),t=e.i(47163);function s({className:e,type:s,...r}){return(0,a.jsx)("input",{type:s,"data-slot":"input",className:(0,t.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}e.s(["Input",()=>s])},10708,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(48425),r=t.forwardRef((e,t)=>(0,a.jsx)(s.Primitive.label,{...e,ref:t,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));r.displayName="Label";var l=e.i(47163);function i({className:e,...t}){return(0,a.jsx)(r,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}e.s(["Label",()=>i],10708)},78784,e=>{"use strict";let a=(0,e.i(75254).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["CheckIcon",()=>a],78784)},27612,e=>{"use strict";let a=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>a],27612)},92270,e=>{"use strict";let a=(0,e.i(75254).default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);e.s(["LogOut",()=>a],92270)},67881,e=>{"use strict";var a=e.i(43476),t=e.i(91918),s=e.i(25913),r=e.i(47163);let l=(0,s.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function i({className:e,variant:s,size:i,asChild:n=!1,...o}){let c=n?t.Slot:"button";return(0,a.jsx)(c,{"data-slot":"button",className:(0,r.cn)(l({variant:s,size:i,className:e})),...o})}e.s(["Button",()=>i])},70065,e=>{"use strict";var a=e.i(43476),t=e.i(47163);function s({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function r({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function l({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",e),...s})}function i({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",e),...s})}function n({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",e),...s})}e.s(["Card",()=>s,"CardContent",()=>n,"CardDescription",()=>i,"CardHeader",()=>r,"CardTitle",()=>l])},64030,e=>{"use strict";let a=(0,e.i(75254).default)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);e.s(["Trophy",()=>a],64030)},10772,e=>{"use strict";var a=e.i(71645),t=e.i(34620),s=a["useId".toString()]||(()=>void 0),r=0;function l(e){let[l,i]=a.useState(s());return(0,t.useLayoutEffect)(()=>{e||i(e=>e??String(r++))},[e]),e||(l?`radix-${l}`:"")}e.s(["useId",()=>l])},99682,e=>{"use strict";var a=e.i(71645);function t(e){let t=a.useRef({value:e,previous:e});return a.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}e.s(["usePrevious",()=>t])},99602,75558,25063,e=>{"use strict";var a=e.i(75254);let t=(0,a.default)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);e.s(["ArrowUpDown",()=>t],99602);let s=(0,a.default)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);e.s(["ArrowUp",()=>s],75558);let r=(0,a.default)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);e.s(["ArrowDown",()=>r],25063)},73375,63059,19897,31026,e=>{"use strict";var a=e.i(75254);let t=(0,a.default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>t],73375);let s=(0,a.default)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>s],63059);let r=(0,a.default)("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);e.s(["ChevronsLeft",()=>r],19897);let l=(0,a.default)("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);e.s(["ChevronsRight",()=>l],31026)},55436,e=>{"use strict";let a=(0,e.i(75254).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["Search",()=>a],55436)},48196,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(18566),r=e.i(29946),l=e.i(11522),i=e.i(47627),n=e.i(70065),o=e.i(67881),c=e.i(23750),d=e.i(10708),h=e.i(27612),u=e.i(75254);let p=(0,u.default)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),m=(0,u.default)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),x=(0,u.default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),w=(0,u.default)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var g=e.i(99602),v=e.i(75558),f=e.i(25063),y=e.i(55436),j=e.i(73375),b=e.i(63059),N=e.i(19897),k=e.i(31026),C=e.i(30374),A=e.i(62870),T=e.i(7151);function S(){let[e,u]=(0,t.useState)([]),[S,_]=(0,t.useState)(!0),[D,H]=(0,t.useState)(""),[P,L]=(0,t.useState)(1),[U,M]=(0,t.useState)("20"),[B,E]=(0,t.useState)(0),[z,I]=(0,t.useState)("created_at"),[R,$]=(0,t.useState)("desc"),[q,F]=(0,t.useState)(!1),[V,O]=(0,t.useState)(!1),[G,J]=(0,t.useState)(null),[K,Z]=(0,t.useState)([]),[Q,W]=(0,t.useState)(!1),[X,Y]=(0,t.useState)(""),[ee,ea]=(0,t.useState)(!1),et=(0,s.useRouter)(),es=(0,t.useCallback)(async(e,a,t,s,r)=>{let l=localStorage.getItem("admin_token");if(!l)return void et.push("/admin/login");let i=new URLSearchParams,n=e.trim();n&&i.set("q",n),i.set("page",a.toString()),i.set("limit",t),i.set("sort_by",s),i.set("sort_order",r);try{let e=await fetch(`/api/admin/players?${i.toString()}`,{headers:{Authorization:`Bearer ${l}`}});if(!e.ok){let a=await e.json().catch(()=>({}));throw Error(a.error||"Failed to fetch players")}let a=await e.json();u(Array.isArray(a.data)?a.data:[]),E(a.total||0)}catch(e){console.error("[v0] Error fetching players:",e),u([]),E(0)}finally{_(!1)}},[et]);(0,t.useEffect)(()=>{if(!localStorage.getItem("admin_token"))return void et.push("/admin/login");_(!0);let e=setTimeout(()=>{es(D,P,U,z,R)},250);return()=>clearTimeout(e)},[et,es,D,P,U,z,R]);let er=e=>{z===e?$("asc"===R?"desc":"asc"):(I(e),$("asc")),L(1)},el=async e=>{J(e),O(!0),W(!0);let a=localStorage.getItem("admin_token");try{let t=await fetch(`/api/admin/players/${e.id}/logs`,{headers:{Authorization:`Bearer ${a}`}});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.error||"Failed to fetch logs")}let s=await t.json();Z(Array.isArray(s)?s:[])}catch(e){console.error("[v0] Error fetching player logs:",e),Z([])}finally{W(!1)}},ei=async a=>{if(!confirm("Are you sure you want to delete this player?"))return;let t=localStorage.getItem("admin_token");try{if(!(await fetch(`/api/admin/players/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok)throw Error("Failed to delete player");u(e.filter(e=>e.id!==a))}catch(e){console.error("[v0] Error deleting player:",e),alert("Failed to delete player")}},en=async(a,t)=>{let s=localStorage.getItem("admin_token");try{if(!(await fetch(`/api/admin/players/${a}/status`,{method:"PATCH",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({is_active:!t})})).ok)throw Error("Failed to update player status");u(e.map(e=>e.id===a?{...e,is_active:!t}:e))}catch(e){console.error("[v0] Error updating player status:",e),alert("Failed to update player status")}},eo=async()=>{if(!G||!X)return;if(X.length<6)return void alert("Password must be at least 6 characters");ea(!0);let e=localStorage.getItem("admin_token");try{let a=await fetch(`/api/admin/players/${G.id}/password`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({password:X})});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to update password")}alert("Password updated successfully"),F(!1),Y(""),J(null)}catch(e){console.error("[v0] Error updating password:",e),alert(e.message||"Failed to update password")}finally{ea(!1)}},ec=async a=>{let t=localStorage.getItem("admin_token");try{let s=await fetch(`/api/admin/players/${a}/activate`,{method:"PATCH",headers:{Authorization:`Bearer ${t}`}});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to activate user")}u(e.map(e=>e.id===a?{...e,is_active:!0}:e)),alert("User activated successfully")}catch(e){console.error("[v0] Error activating user:",e),alert(e.message||"Failed to activate user")}};return S?(0,a.jsxs)(l.SidebarProvider,{children:[(0,a.jsx)(r.AdminNav,{}),(0,a.jsxs)(l.SidebarInset,{className:"bg-muted/40",children:[(0,a.jsxs)("header",{className:"flex h-16 items-center gap-2 border-b bg-background px-4",children:[(0,a.jsx)(l.SidebarTrigger,{}),(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Players"})]}),(0,a.jsx)("div",{className:"flex min-h-[calc(100svh-4rem)] items-center justify-center",children:(0,a.jsx)("div",{className:"text-lg",children:"Loading..."})})]})]}):(0,a.jsxs)(l.SidebarProvider,{children:[(0,a.jsx)(r.AdminNav,{}),(0,a.jsxs)(l.SidebarInset,{className:"min-w-0 bg-muted/40",children:[(0,a.jsxs)("header",{className:"flex h-16 items-center gap-2 border-b bg-background px-4",children:[(0,a.jsx)(l.SidebarTrigger,{}),(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Players"})]}),(0,a.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,a.jsxs)("div",{className:"mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,a.jsx)("div",{className:"flex items-center gap-4 flex-1 min-w-[240px] max-w-md",children:(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsx)(y.Search,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(c.Input,{placeholder:"Search players...",value:D,onChange:e=>{H(e.target.value),L(1)},className:"pl-8"})]})}),(0,a.jsxs)(o.Button,{onClick:()=>{if(!Array.isArray(e)||0===e.length)return void alert("No players data available to export");let a=new Blob([["Name,Email,Phone,Total Score,Games Played,Joined,Status",...e.map(e=>[`"${e.display_name||"N/A"}"`,`"${e.email||"N/A"}"`,`"${e.phone_number||"N/A"}"`,e.total_score,e.games_played,new Date(e.created_at).toLocaleDateString(),e.is_active?"Active":"Disabled"].join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a"),s=URL.createObjectURL(a);t.setAttribute("href",s),t.setAttribute("download",`players_${new Date().toISOString().split("T")[0]}.csv`),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t)},variant:"outline",className:"w-full sm:w-auto gap-2 bg-transparent shrink-0",children:[(0,a.jsx)(x,{className:"h-4 w-4"}),"Export Excel"]})]}),(0,a.jsxs)(n.Card,{children:[(0,a.jsx)(n.CardHeader,{children:(0,a.jsxs)(n.CardTitle,{children:["Player List (",B,")"]})}),(0,a.jsxs)(n.CardContent,{children:[(0,a.jsx)("div",{className:"w-full overflow-x-auto rounded-md border",children:(0,a.jsxs)(i.Table,{children:[(0,a.jsx)(i.TableHeader,{children:(0,a.jsxs)(i.TableRow,{children:[(0,a.jsx)(i.TableHead,{className:"cursor-pointer select-none whitespace-nowrap",onClick:()=>er("display_name"),children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["Name","display_name"===z?"asc"===R?(0,a.jsx)(v.ArrowUp,{className:"h-4 w-4"}):(0,a.jsx)(f.ArrowDown,{className:"h-4 w-4"}):(0,a.jsx)(g.ArrowUpDown,{className:"h-4 w-4 text-muted-foreground/50"})]})}),(0,a.jsx)(i.TableHead,{className:"cursor-pointer select-none whitespace-nowrap",onClick:()=>er("email"),children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["Email","email"===z?"asc"===R?(0,a.jsx)(v.ArrowUp,{className:"h-4 w-4"}):(0,a.jsx)(f.ArrowDown,{className:"h-4 w-4"}):(0,a.jsx)(g.ArrowUpDown,{className:"h-4 w-4 text-muted-foreground/50"})]})}),(0,a.jsx)(i.TableHead,{className:"cursor-pointer select-none whitespace-nowrap",onClick:()=>er("phone_number"),children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["Phone","phone_number"===z?"asc"===R?(0,a.jsx)(v.ArrowUp,{className:"h-4 w-4"}):(0,a.jsx)(f.ArrowDown,{className:"h-4 w-4"}):(0,a.jsx)(g.ArrowUpDown,{className:"h-4 w-4 text-muted-foreground/50"})]})}),(0,a.jsx)(i.TableHead,{className:"cursor-pointer select-none whitespace-nowrap",onClick:()=>er("total_score"),children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["Total Score","total_score"===z?"asc"===R?(0,a.jsx)(v.ArrowUp,{className:"h-4 w-4"}):(0,a.jsx)(f.ArrowDown,{className:"h-4 w-4"}):(0,a.jsx)(g.ArrowUpDown,{className:"h-4 w-4 text-muted-foreground/50"})]})}),(0,a.jsx)(i.TableHead,{className:"cursor-pointer select-none whitespace-nowrap",onClick:()=>er("games_played"),children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["Games Played","games_played"===z?"asc"===R?(0,a.jsx)(v.ArrowUp,{className:"h-4 w-4"}):(0,a.jsx)(f.ArrowDown,{className:"h-4 w-4"}):(0,a.jsx)(g.ArrowUpDown,{className:"h-4 w-4 text-muted-foreground/50"})]})}),(0,a.jsx)(i.TableHead,{className:"cursor-pointer select-none whitespace-nowrap",onClick:()=>er("created_at"),children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["Joined","created_at"===z?"asc"===R?(0,a.jsx)(v.ArrowUp,{className:"h-4 w-4"}):(0,a.jsx)(f.ArrowDown,{className:"h-4 w-4"}):(0,a.jsx)(g.ArrowUpDown,{className:"h-4 w-4 text-muted-foreground/50"})]})}),(0,a.jsx)(i.TableHead,{className:"cursor-pointer select-none whitespace-nowrap",onClick:()=>er("is_active"),children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["Status","is_active"===z?"asc"===R?(0,a.jsx)(v.ArrowUp,{className:"h-4 w-4"}):(0,a.jsx)(f.ArrowDown,{className:"h-4 w-4"}):(0,a.jsx)(g.ArrowUpDown,{className:"h-4 w-4 text-muted-foreground/50"})]})}),(0,a.jsx)(i.TableHead,{className:"text-right whitespace-nowrap",children:"Actions"})]})}),(0,a.jsx)(i.TableBody,{children:0===e.length?(0,a.jsx)(i.TableRow,{children:(0,a.jsx)(i.TableCell,{colSpan:8,className:"text-center",children:"No players found"})}):e.map(e=>(0,a.jsxs)(i.TableRow,{children:[(0,a.jsx)(i.TableCell,{className:"whitespace-nowrap",children:e.display_name||"N/A"}),(0,a.jsx)(i.TableCell,{className:"text-sm text-muted-foreground whitespace-nowrap",children:e.email||"N/A"}),(0,a.jsx)(i.TableCell,{className:"whitespace-nowrap",children:e.phone_number||"N/A"}),(0,a.jsx)(i.TableCell,{className:"whitespace-nowrap",children:e.total_score}),(0,a.jsx)(i.TableCell,{className:"whitespace-nowrap",children:e.games_played}),(0,a.jsx)(i.TableCell,{className:"whitespace-nowrap",children:new Date(e.created_at).toLocaleDateString()}),(0,a.jsx)(i.TableCell,{className:"whitespace-nowrap",children:(0,a.jsx)(o.Button,{variant:e.is_active?"default":"secondary",size:"sm",onClick:()=>en(e.id,e.is_active),children:e.is_active?"Active":"Disabled"})}),(0,a.jsxs)(i.TableCell,{className:"text-right space-x-2 whitespace-nowrap",children:[(0,a.jsx)(o.Button,{variant:"outline",size:"sm",onClick:()=>el(e),title:"View Logs",children:(0,a.jsx)(w,{className:"h-4 w-4"})}),(0,a.jsx)(o.Button,{variant:"outline",size:"sm",onClick:()=>{J(e),F(!0)},title:"Set Password",children:(0,a.jsx)(p,{className:"h-4 w-4"})}),!e.is_active&&(0,a.jsx)(o.Button,{variant:"outline",size:"sm",onClick:()=>ec(e.id),title:"Activate User",className:"text-green-600 hover:text-green-700",children:(0,a.jsx)(m,{className:"h-4 w-4"})}),(0,a.jsx)(o.Button,{variant:"destructive",size:"sm",onClick:()=>ei(e.id),children:(0,a.jsx)(h.Trash2,{className:"h-4 w-4"})})]})]},e.id))})]})}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 py-4 mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium whitespace-nowrap",children:"Rows per page"}),(0,a.jsxs)(A.Select,{value:U,onValueChange:e=>{M(e),L(1)},children:[(0,a.jsx)(A.SelectTrigger,{className:"h-8 w-[70px]",children:(0,a.jsx)(A.SelectValue,{placeholder:U})}),(0,a.jsx)(A.SelectContent,{side:"top",children:["20","50","100","all"].map(e=>(0,a.jsx)(A.SelectItem,{value:e,children:"all"===e?"All":e},e))})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",P," of ","all"===U?1:Math.ceil(B/parseInt(U))||1]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(o.Button,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>L(1),disabled:1===P,children:[(0,a.jsx)("span",{className:"sr-only",children:"Go to first page"}),(0,a.jsx)(N.ChevronsLeft,{className:"h-4 w-4"})]}),(0,a.jsxs)(o.Button,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>L(P-1),disabled:1===P,children:[(0,a.jsx)("span",{className:"sr-only",children:"Go to previous page"}),(0,a.jsx)(j.ChevronLeft,{className:"h-4 w-4"})]}),(0,a.jsxs)(o.Button,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>L(P+1),disabled:"all"===U||P>=Math.ceil(B/parseInt(U)),children:[(0,a.jsx)("span",{className:"sr-only",children:"Go to next page"}),(0,a.jsx)(b.ChevronRight,{className:"h-4 w-4"})]}),(0,a.jsxs)(o.Button,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>L(Math.ceil(B/parseInt(U))),disabled:"all"===U||P>=Math.ceil(B/parseInt(U)),children:[(0,a.jsx)("span",{className:"sr-only",children:"Go to last page"}),(0,a.jsx)(k.ChevronsRight,{className:"h-4 w-4"})]})]})]})]})]})]}),(0,a.jsx)(C.Dialog,{open:q,onOpenChange:F,children:(0,a.jsxs)(C.DialogContent,{children:[(0,a.jsxs)(C.DialogHeader,{children:[(0,a.jsxs)(C.DialogTitle,{children:["Set Password for ",G?.display_name||"Player"]}),(0,a.jsx)(C.DialogDescription,{children:"Enter a new password for this user. The password must be at least 6 characters."})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"newPassword",children:"New Password"}),(0,a.jsx)(c.Input,{id:"newPassword",type:"password",value:X,onChange:e=>Y(e.target.value),placeholder:"Enter new password"})]}),(0,a.jsx)(o.Button,{onClick:eo,disabled:ee||!X,className:"w-full",children:ee?"Updating...":"Set Password"})]})]})}),(0,a.jsx)(C.Dialog,{open:V,onOpenChange:O,children:(0,a.jsxs)(C.DialogContent,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)(C.DialogHeader,{children:[(0,a.jsxs)(C.DialogTitle,{children:["Activity Logs - ",G?.display_name||"Player"]}),(0,a.jsx)(C.DialogDescription,{children:"Device, browser, and location information for this player."})]}),(0,a.jsx)("div",{className:"py-4",children:Q?(0,a.jsx)("div",{className:"text-center py-8",children:"Loading logs..."}):0===K.length?(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No logs found for this player."}):(0,a.jsx)("div",{className:"rounded-md border overflow-x-auto",children:(0,a.jsxs)(i.Table,{children:[(0,a.jsx)(i.TableHeader,{children:(0,a.jsxs)(i.TableRow,{children:[(0,a.jsx)(i.TableHead,{children:"Date"}),(0,a.jsx)(i.TableHead,{children:"Action"}),(0,a.jsx)(i.TableHead,{children:"IP Address"}),(0,a.jsx)(i.TableHead,{children:"Browser"}),(0,a.jsx)(i.TableHead,{children:"Device"}),(0,a.jsx)(i.TableHead,{children:"Location"})]})}),(0,a.jsx)(i.TableBody,{children:K.map(e=>(0,a.jsxs)(i.TableRow,{children:[(0,a.jsx)(i.TableCell,{className:"text-sm",children:new Date(e.created_at).toLocaleString()}),(0,a.jsx)(i.TableCell,{className:"capitalize",children:e.action}),(0,a.jsx)(i.TableCell,{className:"text-sm font-mono",children:e.ip_address||"N/A"}),(0,a.jsx)(i.TableCell,{className:"text-sm",children:e.browser||"N/A"}),(0,a.jsxs)(i.TableCell,{className:"text-sm",children:[e.device||"N/A"," ",e.os?`(${e.os})`:""]}),(0,a.jsx)(i.TableCell,{className:"text-sm",children:e.city&&e.country?`${e.city}, ${e.country}`:"N/A"})]},e.id))})]})})})]})}),(0,a.jsx)(T.AdminFooter,{})]})]})]})}e.s(["default",()=>S],48196)}]);