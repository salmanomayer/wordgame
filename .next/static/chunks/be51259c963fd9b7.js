(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,94179,e=>{"use strict";var r=e.i(43476),a=e.i(91918),t=e.i(25913),s=e.i(47163);let i=(0,t.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:t,asChild:n=!1,...l}){let d=n?a.Slot:"span";return(0,r.jsx)(d,{"data-slot":"badge",className:(0,s.cn)(i({variant:t}),e),...l})}e.s(["Badge",()=>n])},7233,e=>{"use strict";let r=(0,e.i(75254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>r],7233)},78784,e=>{"use strict";let r=(0,e.i(75254).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["CheckIcon",()=>r],78784)},23750,e=>{"use strict";var r=e.i(43476),a=e.i(47163);function t({className:e,type:t,...s}){return(0,r.jsx)("input",{type:t,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...s})}e.s(["Input",()=>t])},10708,e=>{"use strict";var r=e.i(43476),a=e.i(71645),t=e.i(48425),s=a.forwardRef((e,a)=>(0,r.jsx)(t.Primitive.label,{...e,ref:a,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));s.displayName="Label";var i=e.i(47163);function n({className:e,...a}){return(0,r.jsx)(s,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...a})}e.s(["Label",()=>n],10708)},67881,e=>{"use strict";var r=e.i(43476),a=e.i(91918),t=e.i(25913),s=e.i(47163);let i=(0,t.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function n({className:e,variant:t,size:n,asChild:l=!1,...d}){let o=l?a.Slot:"button";return(0,r.jsx)(o,{"data-slot":"button",className:(0,s.cn)(i({variant:t,size:n,className:e})),...d})}e.s(["Button",()=>n])},64030,e=>{"use strict";let r=(0,e.i(75254).default)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);e.s(["Trophy",()=>r],64030)},92270,e=>{"use strict";let r=(0,e.i(75254).default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);e.s(["LogOut",()=>r],92270)},10772,e=>{"use strict";var r=e.i(71645),a=e.i(34620),t=r["useId".toString()]||(()=>void 0),s=0;function i(e){let[i,n]=r.useState(t());return(0,a.useLayoutEffect)(()=>{e||n(e=>e??String(s++))},[e]),e||(i?`radix-${i}`:"")}e.s(["useId",()=>i])},99682,e=>{"use strict";var r=e.i(71645);function a(e){let a=r.useRef({value:e,previous:e});return r.useMemo(()=>(a.current.value!==e&&(a.current.previous=a.current.value,a.current.value=e),a.current.previous),[e])}e.s(["usePrevious",()=>a])},27612,e=>{"use strict";let r=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>r],27612)},88511,e=>{"use strict";let r=(0,e.i(75254).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>r],88511)},51364,e=>{"use strict";var r=e.i(43476),a=e.i(71645),t=e.i(18566),s=e.i(29946),i=e.i(11522),n=e.i(67881),l=e.i(23750),d=e.i(10708),o=e.i(30374),c=e.i(62870),u=e.i(47627),h=e.i(94179),m=e.i(7233),p=e.i(27612),g=e.i(88511),v=e.i(7151);function x(){let e=(0,t.useRouter)(),[x,b]=(0,a.useState)([]),[f,y]=(0,a.useState)(!0),[j,w]=(0,a.useState)(!1),[k,N]=(0,a.useState)(null),[S,T]=(0,a.useState)({email:"",password:"",role:"admin"}),C=(0,a.useCallback)(async()=>{try{let r=localStorage.getItem("admin_token");if(!r)return void e.push("/admin/login");let a=await fetch("/api/admin/users",{headers:{Authorization:`Bearer ${r}`}});if(401===a.status){localStorage.removeItem("admin_token"),e.push("/admin/login");return}if(a.ok){let e=await a.json();b(Array.isArray(e.users)?e.users:[])}else{let e=await a.json().catch(()=>({}));console.error("Failed to fetch users:",e.error||a.statusText),b([])}}catch(e){console.error("Failed to fetch users:",e),b([])}finally{y(!1)}},[e]);(0,a.useEffect)(()=>{C()},[C]);let A=async e=>{e.preventDefault();let r=localStorage.getItem("admin_token");try{let e=k?`/api/admin/users/${k.id}`:"/api/admin/users",a=k?"PUT":"POST",t={email:S.email,role:S.role};(!k||S.password)&&(t.password=S.password);let s=await fetch(e,{method:a,headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(t)});if(s.ok)w(!1),N(null),T({email:"",password:"",role:"admin"}),C();else{let e=await s.json();alert(e.error||"Failed to save user")}}catch(e){console.error("Failed to save user:",e),alert("Failed to save user")}},M=async e=>{if(!confirm("Are you sure you want to delete this admin user?"))return;let r=localStorage.getItem("admin_token");try{let a=await fetch(`/api/admin/users/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${r}`}});if(a.ok)C();else{let e=await a.json();alert(e.error||"Failed to delete user")}}catch(e){console.error("Failed to delete user:",e),alert("Failed to delete user")}};return f?(0,r.jsxs)(i.SidebarProvider,{children:[(0,r.jsx)(s.AdminNav,{}),(0,r.jsxs)(i.SidebarInset,{children:[(0,r.jsxs)("header",{className:"flex h-16 items-center gap-2 border-b bg-background px-4",children:[(0,r.jsx)(i.SidebarTrigger,{}),(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"Admin Users"})]}),(0,r.jsx)("div",{className:"container mx-auto p-6",children:(0,r.jsx)("p",{children:"Loading..."})})]})]}):(0,r.jsxs)(i.SidebarProvider,{children:[(0,r.jsx)(s.AdminNav,{}),(0,r.jsxs)(i.SidebarInset,{className:"min-w-0",children:[(0,r.jsxs)("header",{className:"flex h-16 items-center gap-2 border-b bg-background px-4",children:[(0,r.jsx)(i.SidebarTrigger,{}),(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"Admin Users"})]}),(0,r.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,r.jsxs)("div",{className:"mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,r.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Admin Users"}),(0,r.jsxs)(n.Button,{onClick:()=>{N(null),T({email:"",password:"",role:"admin"}),w(!0)},className:"w-full sm:w-auto",children:[(0,r.jsx)(m.Plus,{className:"mr-2 h-4 w-4"}),"Add Admin User"]})]}),(0,r.jsx)("div",{className:"w-full overflow-x-auto rounded-lg border bg-card",children:(0,r.jsxs)(u.Table,{children:[(0,r.jsx)(u.TableHeader,{children:(0,r.jsxs)(u.TableRow,{children:[(0,r.jsx)(u.TableHead,{className:"whitespace-nowrap",children:"Email"}),(0,r.jsx)(u.TableHead,{className:"whitespace-nowrap",children:"Role"}),(0,r.jsx)(u.TableHead,{className:"whitespace-nowrap",children:"Created At"}),(0,r.jsx)(u.TableHead,{className:"text-right whitespace-nowrap",children:"Actions"})]})}),(0,r.jsx)(u.TableBody,{children:x.map(e=>(0,r.jsxs)(u.TableRow,{children:[(0,r.jsx)(u.TableCell,{className:"font-medium whitespace-nowrap",children:e.email}),(0,r.jsx)(u.TableCell,{className:"whitespace-nowrap",children:(0,r.jsx)(h.Badge,{className:(e=>{switch(e){case"super_admin":return"bg-red-500";case"admin":return"bg-blue-500";case"moderator":return"bg-green-500";default:return"bg-gray-500"}})(e.role),children:e.role.replace("_"," ")})}),(0,r.jsx)(u.TableCell,{className:"whitespace-nowrap",children:new Date(e.created_at).toLocaleDateString()}),(0,r.jsxs)(u.TableCell,{className:"text-right whitespace-nowrap",children:[(0,r.jsx)(n.Button,{variant:"ghost",size:"sm",onClick:()=>{N(e),T({email:e.email,password:"",role:e.role}),w(!0)},children:(0,r.jsx)(g.Edit,{className:"h-4 w-4"})}),(0,r.jsx)(n.Button,{variant:"ghost",size:"sm",onClick:()=>M(e.id),children:(0,r.jsx)(p.Trash2,{className:"h-4 w-4 text-destructive"})})]})]},e.id))})]})}),(0,r.jsx)(o.Dialog,{open:j,onOpenChange:w,children:(0,r.jsxs)(o.DialogContent,{children:[(0,r.jsxs)(o.DialogHeader,{children:[(0,r.jsx)(o.DialogTitle,{children:k?"Edit Admin User":"Add Admin User"}),(0,r.jsx)(o.DialogDescription,{children:k?"Update admin user details and permissions":"Create a new admin user with specific role and permissions"})]}),(0,r.jsxs)("form",{onSubmit:A,children:[(0,r.jsxs)("div",{className:"space-y-4 py-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.Label,{htmlFor:"email",children:"Email"}),(0,r.jsx)(l.Input,{id:"email",type:"email",value:S.email,onChange:e=>T({...S,email:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(d.Label,{htmlFor:"password",children:["Password ",k&&"(leave blank to keep current)"]}),(0,r.jsx)(l.Input,{id:"password",type:"password",value:S.password,onChange:e=>T({...S,password:e.target.value}),required:!k})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.Label,{htmlFor:"role",children:"Role"}),(0,r.jsxs)(c.Select,{value:S.role,onValueChange:e=>T({...S,role:e}),children:[(0,r.jsx)(c.SelectTrigger,{children:(0,r.jsx)(c.SelectValue,{})}),(0,r.jsxs)(c.SelectContent,{children:[(0,r.jsx)(c.SelectItem,{value:"super_admin",children:"Super Admin"}),(0,r.jsx)(c.SelectItem,{value:"admin",children:"Admin"}),(0,r.jsx)(c.SelectItem,{value:"moderator",children:"Moderator"})]})]}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["super_admin"===S.role&&"Full access to all features including user management","admin"===S.role&&"Can manage subjects, words, and view players","moderator"===S.role&&"Can edit subjects and manage words"]})]})]}),(0,r.jsxs)(o.DialogFooter,{children:[(0,r.jsx)(n.Button,{type:"button",variant:"outline",onClick:()=>w(!1),children:"Cancel"}),(0,r.jsx)(n.Button,{type:"submit",children:k?"Update":"Create"})]})]})]})}),(0,r.jsx)(v.AdminFooter,{})]})]})]})}e.s(["default",()=>x])}]);