(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23750,e=>{"use strict";var a=e.i(43476),t=e.i(47163);function s({className:e,type:s,...r}){return(0,a.jsx)("input",{type:s,"data-slot":"input",className:(0,t.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}e.s(["Input",()=>s])},10772,e=>{"use strict";var a=e.i(71645),t=e.i(34620),s=a["useId".toString()]||(()=>void 0),r=0;function l(e){let[l,i]=a.useState(s());return(0,t.useLayoutEffect)(()=>{e||i(e=>e??String(r++))},[e]),e||(l?`radix-${l}`:"")}e.s(["useId",()=>l])},67881,e=>{"use strict";var a=e.i(43476),t=e.i(91918),s=e.i(25913),r=e.i(47163);let l=(0,s.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function i({className:e,variant:s,size:i,asChild:n=!1,...d}){let o=n?t.Slot:"button";return(0,a.jsx)(o,{"data-slot":"button",className:(0,r.cn)(l({variant:s,size:i,className:e})),...d})}e.s(["Button",()=>i])},70065,e=>{"use strict";var a=e.i(43476),t=e.i(47163);function s({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function r({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function l({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",e),...s})}function i({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",e),...s})}function n({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",e),...s})}e.s(["Card",()=>s,"CardContent",()=>n,"CardDescription",()=>i,"CardHeader",()=>r,"CardTitle",()=>l])},64030,e=>{"use strict";let a=(0,e.i(75254).default)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);e.s(["Trophy",()=>a],64030)},92270,e=>{"use strict";let a=(0,e.i(75254).default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);e.s(["LogOut",()=>a],92270)},47627,e=>{"use strict";var a=e.i(43476),t=e.i(47163);function s({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,a.jsx)("table",{"data-slot":"table",className:(0,t.cn)("w-full caption-bottom text-sm",e),...s})})}function r({className:e,...s}){return(0,a.jsx)("thead",{"data-slot":"table-header",className:(0,t.cn)("[&_tr]:border-b",e),...s})}function l({className:e,...s}){return(0,a.jsx)("tbody",{"data-slot":"table-body",className:(0,t.cn)("[&_tr:last-child]:border-0",e),...s})}function i({className:e,...s}){return(0,a.jsx)("tr",{"data-slot":"table-row",className:(0,t.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...s})}function n({className:e,...s}){return(0,a.jsx)("th",{"data-slot":"table-head",className:(0,t.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}function d({className:e,...s}){return(0,a.jsx)("td",{"data-slot":"table-cell",className:(0,t.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}e.s(["Table",()=>s,"TableBody",()=>l,"TableCell",()=>d,"TableHead",()=>n,"TableHeader",()=>r,"TableRow",()=>i])},31343,e=>{"use strict";let a=(0,e.i(75254).default)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);e.s(["Play",()=>a],31343)},35815,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(18566),r=e.i(29946),l=e.i(11522),i=e.i(67881),n=e.i(70065),d=e.i(23750),o=e.i(47627),c=e.i(7151),u=e.i(31343),x=e.i(64030);let h=(0,e.i(75254).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);function m(){let e=(0,s.useRouter)(),[m,b]=(0,t.useState)([]),[p,g]=(0,t.useState)(""),[f,j]=(0,t.useState)([]),[y,v]=(0,t.useState)([]),[w,T]=(0,t.useState)(!0),[N,k]=(0,t.useState)("");(0,t.useEffect)(()=>{(async()=>{let a=localStorage.getItem("admin_token");if(!a)return e.push("/admin/login");let t=await fetch("/api/admin/games?limit=all",{headers:{Authorization:`Bearer ${a}`}}),s=await t.json().catch(()=>({data:[]})),r=Array.isArray(s?.data)?s.data:[];b(r),r.length>0&&g(r[0].id),T(!1)})()},[e]),(0,t.useEffect)(()=>{(async()=>{let e=localStorage.getItem("admin_token");if(!e||!p)return;let a=await fetch(`/api/admin/games/${p}/results`,{headers:{Authorization:`Bearer ${e}`}}),t=await a.json().catch(()=>({}));j(Array.isArray(t?.leaderboard)?t.leaderboard:[]),v(Array.isArray(t?.sessions)?t.sessions:[])})()},[p]);let C=(0,t.useMemo)(()=>{let e=N.trim().toLowerCase();return e?f.filter(a=>a.display_name?.toLowerCase().includes(e)||String(a.total_score).includes(e)||String(a.rank).includes(e)):f},[f,N]),_=(0,t.useMemo)(()=>{let e=N.trim().toLowerCase();return e?y.filter(a=>(a.display_name||"").toLowerCase().includes(e)||(a.email||"").toLowerCase().includes(e)||a.subject_name.toLowerCase().includes(e)||a.difficulty.toLowerCase().includes(e)||String(a.score).includes(e)):y},[y,N]);return w?(0,a.jsx)("div",{className:"p-6 text-center",children:"Loading..."}):(0,a.jsxs)(l.SidebarProvider,{children:[(0,a.jsx)(r.AdminNav,{}),(0,a.jsxs)(l.SidebarInset,{children:[(0,a.jsxs)("header",{className:"flex h-14 shrink-0 items-center gap-2 border-b px-4",children:[(0,a.jsx)(l.SidebarTrigger,{className:"mr-2"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(x.Trophy,{className:"h-5 w-5"}),(0,a.jsx)("h1",{className:"text-lg font-semibold",children:"Game Results"})]})]}),(0,a.jsxs)("main",{className:"p-4 space-y-6",children:[(0,a.jsx)(n.Card,{className:"p-4 space-y-4",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("label",{className:"text-sm text-muted-foreground",children:"Select Game"}),(0,a.jsx)("select",{value:p,onChange:e=>g(e.target.value),className:"flex h-9 rounded-md border bg-background px-3 py-2 text-sm",children:m.map(e=>(0,a.jsx)("option",{value:e.id,children:e.title},e.id))})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(h,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)(d.Input,{placeholder:"Search player, subject, difficulty or score",value:N,onChange:e=>k(e.target.value),className:"w-72"})]})]})}),(0,a.jsxs)(n.Card,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(x.Trophy,{className:"h-5 w-5 text-yellow-500"}),(0,a.jsx)("h2",{className:"text-base font-semibold",children:"Leaderboard"})]}),(0,a.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>{let e=new Blob(["rank,player,total_score,games_played\n"+C.map(e=>({rank:e.rank,player:e.display_name,total_score:e.total_score,games_played:e.games_played})).map(e=>`${e.rank},${e.player},${e.total_score},${e.games_played}`).join("\n")],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(e),t=document.createElement("a");t.href=a,t.download="leaderboard.csv",t.click(),URL.revokeObjectURL(a)},children:"Export CSV"})]}),(0,a.jsxs)(o.Table,{children:[(0,a.jsx)(o.TableHeader,{children:(0,a.jsxs)(o.TableRow,{children:[(0,a.jsx)(o.TableHead,{children:"Rank"}),(0,a.jsx)(o.TableHead,{children:"Player"}),(0,a.jsx)(o.TableHead,{children:"Total Score"}),(0,a.jsx)(o.TableHead,{children:"Games Played"})]})}),(0,a.jsx)(o.TableBody,{children:0===C.length?(0,a.jsx)(o.TableRow,{children:(0,a.jsx)(o.TableCell,{colSpan:4,className:"text-center text-muted-foreground",children:"No data"})}):C.map(e=>(0,a.jsxs)(o.TableRow,{children:[(0,a.jsx)(o.TableCell,{children:e.rank}),(0,a.jsx)(o.TableCell,{children:e.display_name}),(0,a.jsx)(o.TableCell,{children:e.total_score}),(0,a.jsx)(o.TableCell,{children:e.games_played})]},e.player_id))})]})]}),(0,a.jsxs)(n.Card,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(u.Play,{className:"h-5 w-5 text-emerald-500"}),(0,a.jsx)("h2",{className:"text-base font-semibold",children:"Sessions"})]}),(0,a.jsxs)(o.Table,{children:[(0,a.jsx)(o.TableHeader,{children:(0,a.jsxs)(o.TableRow,{children:[(0,a.jsx)(o.TableHead,{children:"Player"}),(0,a.jsx)(o.TableHead,{children:"Subject"}),(0,a.jsx)(o.TableHead,{children:"Difficulty"}),(0,a.jsx)(o.TableHead,{children:"Score"}),(0,a.jsx)(o.TableHead,{children:"Words"}),(0,a.jsx)(o.TableHead,{children:"Completed"})]})}),(0,a.jsx)(o.TableBody,{children:0===_.length?(0,a.jsx)(o.TableRow,{children:(0,a.jsx)(o.TableCell,{colSpan:6,className:"text-center text-muted-foreground",children:"No sessions"})}):_.map(e=>(0,a.jsxs)(o.TableRow,{children:[(0,a.jsx)(o.TableCell,{children:e.display_name||e.email||e.player_id}),(0,a.jsx)(o.TableCell,{children:e.subject_name}),(0,a.jsx)(o.TableCell,{className:"uppercase",children:e.difficulty}),(0,a.jsx)(o.TableCell,{children:e.score}),(0,a.jsxs)(o.TableCell,{children:[e.words_completed,"/",e.total_words]}),(0,a.jsx)(o.TableCell,{children:new Date(e.completed_at).toLocaleString()})]},e.id))})]})]}),(0,a.jsx)(c.AdminFooter,{})]})]})]})}e.s(["default",()=>m],35815)}]);