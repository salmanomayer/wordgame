(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23750,e=>{"use strict";var t=e.i(43476),r=e.i(47163);function s({className:e,type:s,...a}){return(0,t.jsx)("input",{type:s,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...a})}e.s(["Input",()=>s])},10708,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(48425),a=r.forwardRef((e,r)=>(0,t.jsx)(s.Primitive.label,{...e,ref:r,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));a.displayName="Label";var i=e.i(47163);function n({className:e,...r}){return(0,t.jsx)(a,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...r})}e.s(["Label",()=>n],10708)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},78784,e=>{"use strict";let t=(0,e.i(75254).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["CheckIcon",()=>t],78784)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],27612)},92270,e=>{"use strict";let t=(0,e.i(75254).default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);e.s(["LogOut",()=>t],92270)},70065,e=>{"use strict";var t=e.i(43476),r=e.i(47163);function s({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function a({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function i({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",e),...s})}function n({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",e),...s})}function l({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",e),...s})}e.s(["Card",()=>s,"CardContent",()=>l,"CardDescription",()=>n,"CardHeader",()=>a,"CardTitle",()=>i])},75254,e=>{"use strict";var t=e.i(71645);let r=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let a=(0,t.forwardRef)(({color:e="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:n,className:l="",children:o,iconNode:c,...d},u)=>(0,t.createElement)("svg",{ref:u,...s,width:a,height:a,stroke:e,strokeWidth:n?24*Number(i)/Number(a):i,className:r("lucide",l),...d},[...c.map(([e,r])=>(0,t.createElement)(e,r)),...Array.isArray(o)?o:[o]])),i=(e,s)=>{let i=(0,t.forwardRef)(({className:i,...n},l)=>(0,t.createElement)(a,{ref:l,iconNode:s,className:r(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,i),...n}));return i.displayName=`${e}`,i};e.s(["default",()=>i],75254)},48425,e=>{"use strict";var t=e.i(71645),r=e.i(74080),s=e.i(91918),a=e.i(43476),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,r)=>{let i=t.forwardRef((e,t)=>{let{asChild:i,...n}=e,l=i?s.Slot:r;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(l,{...n,ref:t})});return i.displayName=`Primitive.${r}`,{...e,[r]:i}},{});function n(e,t){e&&r.flushSync(()=>e.dispatchEvent(t))}e.s(["Primitive",()=>i,"dispatchDiscreteCustomEvent",()=>n])},30030,e=>{"use strict";var t=e.i(71645),r=e.i(43476);function s(e,s){let a=t.createContext(s),i=e=>{let{children:s,...i}=e,n=t.useMemo(()=>i,Object.values(i));return(0,r.jsx)(a.Provider,{value:n,children:s})};return i.displayName=e+"Provider",[i,function(r){let i=t.useContext(a);if(i)return i;if(void 0!==s)return s;throw Error(`\`${r}\` must be used within \`${e}\``)}]}function a(e,s=[]){let i=[],n=()=>{let r=i.map(e=>t.createContext(e));return function(s){let a=s?.[e]||r;return t.useMemo(()=>({[`__scope${e}`]:{...s,[e]:a}}),[s,a])}};return n.scopeName=e,[function(s,a){let n=t.createContext(a),l=i.length;i=[...i,a];let o=s=>{let{scope:a,children:i,...o}=s,c=a?.[e]?.[l]||n,d=t.useMemo(()=>o,Object.values(o));return(0,r.jsx)(c.Provider,{value:d,children:i})};return o.displayName=s+"Provider",[o,function(r,i){let o=i?.[e]?.[l]||n,c=t.useContext(o);if(c)return c;if(void 0!==a)return a;throw Error(`\`${r}\` must be used within \`${s}\``)}]},function(...e){let r=e[0];if(1===e.length)return r;let s=()=>{let s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let a=s.reduce((t,{useScope:r,scopeName:s})=>{let a=r(e)[`__scope${s}`];return{...t,...a}},{});return t.useMemo(()=>({[`__scope${r.scopeName}`]:a}),[a])}};return s.scopeName=r.scopeName,s}(n,...s)]}e.s(["createContext",()=>s,"createContextScope",()=>a])},81140,34620,10772,30207,69340,96626,e=>{"use strict";function t(e,r,{checkForDefaultPrevented:s=!0}={}){return function(t){if(e?.(t),!1===s||!t.defaultPrevented)return r?.(t)}}e.s(["composeEventHandlers",()=>t],81140);var r=e.i(71645),s=globalThis?.document?r.useLayoutEffect:()=>{};e.s(["useLayoutEffect",()=>s],34620);var a=r["useId".toString()]||(()=>void 0),i=0;function n(e){let[t,n]=r.useState(a());return s(()=>{e||n(e=>e??String(i++))},[e]),e||(t?`radix-${t}`:"")}function l(e){let t=r.useRef(e);return r.useEffect(()=>{t.current=e}),r.useMemo(()=>(...e)=>t.current?.(...e),[])}function o({prop:e,defaultProp:t,onChange:s=()=>{}}){let[a,i]=function({defaultProp:e,onChange:t}){let s=r.useState(e),[a]=s,i=r.useRef(a),n=l(t);return r.useEffect(()=>{i.current!==a&&(n(a),i.current=a)},[a,i,n]),s}({defaultProp:t,onChange:s}),n=void 0!==e,o=n?e:a,c=l(s);return[o,r.useCallback(t=>{if(n){let r="function"==typeof t?t(e):t;r!==e&&c(r)}else i(t)},[n,e,i,c])]}e.s(["useId",()=>n],10772),e.s(["useCallbackRef",()=>l],30207),e.s(["useControllableState",()=>o],69340);var c=e.i(20783),d=e=>{var t;let a,i,{present:n,children:l}=e,o=function(e){var t,a;let[i,n]=r.useState(),l=r.useRef({}),o=r.useRef(e),c=r.useRef("none"),[d,m]=(t=e?"mounted":"unmounted",a={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},r.useReducer((e,t)=>a[e][t]??e,t));return r.useEffect(()=>{let e=u(l.current);c.current="mounted"===d?e:"none"},[d]),s(()=>{let t=l.current,r=o.current;if(r!==e){let s=c.current,a=u(t);e?m("MOUNT"):"none"===a||t?.display==="none"?m("UNMOUNT"):r&&s!==a?m("ANIMATION_OUT"):m("UNMOUNT"),o.current=e}},[e,m]),s(()=>{if(i){let e,t=i.ownerDocument.defaultView??window,r=r=>{let s=u(l.current).includes(r.animationName);if(r.target===i&&s&&(m("ANIMATION_END"),!o.current)){let r=i.style.animationFillMode;i.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===i.style.animationFillMode&&(i.style.animationFillMode=r)})}},s=e=>{e.target===i&&(c.current=u(l.current))};return i.addEventListener("animationstart",s),i.addEventListener("animationcancel",r),i.addEventListener("animationend",r),()=>{t.clearTimeout(e),i.removeEventListener("animationstart",s),i.removeEventListener("animationcancel",r),i.removeEventListener("animationend",r)}}m("ANIMATION_END")},[i,m]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:r.useCallback(e=>{e&&(l.current=getComputedStyle(e)),n(e)},[])}}(n),d="function"==typeof l?l({present:o.isPresent}):r.Children.only(l),m=(0,c.useComposedRefs)(o.ref,(t=d,(i=(a=Object.getOwnPropertyDescriptor(t.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?t.ref:(i=(a=Object.getOwnPropertyDescriptor(t,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?t.props.ref:t.props.ref||t.ref));return"function"==typeof l||o.isPresent?r.cloneElement(d,{ref:m}):null};function u(e){return e?.animationName||"none"}d.displayName="Presence",e.s(["Presence",()=>d],96626)},99682,e=>{"use strict";var t=e.i(71645);function r(e){let r=t.useRef({value:e,previous:e});return t.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}e.s(["usePrevious",()=>r])},20682,e=>{"use strict";var t=e.i(71645);let r=0,s=new Map,a=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},i=[],n={toasts:[]};function l(e){n=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?a(r):e.toasts.forEach(e=>{a(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(n,e),i.forEach(e=>{e(n)})}function o({...e}){let t=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>l({type:"DISMISS_TOAST",toastId:t});return l({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function c(){let[e,r]=t.useState(n);return t.useEffect(()=>(i.push(r),()=>{let e=i.indexOf(r);e>-1&&i.splice(e,1)}),[e]),{...e,toast:o,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}e.s(["useToast",()=>c])},7233,e=>{"use strict";let t=(0,e.i(75254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},19036,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(81140),a=e.i(20783),i=e.i(30030),n=e.i(69340),l=e.i(99682),o=e.i(35804),c=e.i(48425),d="Switch",[u,m]=(0,i.createContextScope)(d),[p,f]=u(d),h=r.forwardRef((e,i)=>{let{__scopeSwitch:l,name:o,checked:d,defaultChecked:u,required:m,disabled:f,value:h="on",onCheckedChange:x,form:g,...y}=e,[j,N]=r.useState(null),k=(0,a.useComposedRefs)(i,e=>N(e)),w=r.useRef(!1),C=!j||g||!!j.closest("form"),[S=!1,T]=(0,n.useControllableState)({prop:d,defaultProp:u,onChange:x});return(0,t.jsxs)(p,{scope:l,checked:S,disabled:f,children:[(0,t.jsx)(c.Primitive.button,{type:"button",role:"switch","aria-checked":S,"aria-required":m,"data-state":b(S),"data-disabled":f?"":void 0,disabled:f,value:h,...y,ref:k,onClick:(0,s.composeEventHandlers)(e.onClick,e=>{T(e=>!e),C&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())})}),C&&(0,t.jsx)(v,{control:j,bubbles:!w.current,name:o,value:h,checked:S,required:m,disabled:f,form:g,style:{transform:"translateX(-100%)"}})]})});h.displayName=d;var x="SwitchThumb",g=r.forwardRef((e,r)=>{let{__scopeSwitch:s,...a}=e,i=f(x,s);return(0,t.jsx)(c.Primitive.span,{"data-state":b(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:r})});g.displayName=x;var v=e=>{let{control:s,checked:a,bubbles:i=!0,...n}=e,c=r.useRef(null),d=(0,l.usePrevious)(a),u=(0,o.useSize)(s);return r.useEffect(()=>{let e=c.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(d!==a&&t){let r=new Event("click",{bubbles:i});t.call(e,a),e.dispatchEvent(r)}},[d,a,i]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...n,tabIndex:-1,ref:c,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function b(e){return e?"checked":"unchecked"}var y=e.i(47163);function j({className:e,...r}){return(0,t.jsx)(h,{"data-slot":"switch",className:(0,y.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...r,children:(0,t.jsx)(g,{"data-slot":"switch-thumb",className:"bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0"})})}e.s(["Switch",()=>j],19036)},29728,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(18566),a=e.i(67881),i=e.i(23750),n=e.i(10708),l=e.i(70065),o=e.i(20783),c=e.i(30030),d=e.i(81140),u=e.i(69340),m=e.i(99682),p=e.i(35804),f=e.i(96626),h=e.i(48425),x="Checkbox",[g,v]=(0,c.createContextScope)(x),[b,y]=g(x),j=r.forwardRef((e,s)=>{let{__scopeCheckbox:a,name:i,checked:n,defaultChecked:l,required:c,disabled:m,value:p="on",onCheckedChange:f,form:x,...g}=e,[v,y]=r.useState(null),j=(0,o.useComposedRefs)(s,e=>y(e)),N=r.useRef(!1),k=!v||x||!!v.closest("form"),[T=!1,E]=(0,u.useControllableState)({prop:n,defaultProp:l,onChange:f}),A=r.useRef(T);return r.useEffect(()=>{let e=v?.form;if(e){let t=()=>E(A.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[v,E]),(0,t.jsxs)(b,{scope:a,state:T,disabled:m,children:[(0,t.jsx)(h.Primitive.button,{type:"button",role:"checkbox","aria-checked":C(T)?"mixed":T,"aria-required":c,"data-state":S(T),"data-disabled":m?"":void 0,disabled:m,value:p,...g,ref:j,onKeyDown:(0,d.composeEventHandlers)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,d.composeEventHandlers)(e.onClick,e=>{E(e=>!!C(e)||!e),k&&(N.current=e.isPropagationStopped(),N.current||e.stopPropagation())})}),k&&(0,t.jsx)(w,{control:v,bubbles:!N.current,name:i,value:p,checked:T,required:c,disabled:m,form:x,style:{transform:"translateX(-100%)"},defaultChecked:!C(l)&&l})]})});j.displayName=x;var N="CheckboxIndicator",k=r.forwardRef((e,r)=>{let{__scopeCheckbox:s,forceMount:a,...i}=e,n=y(N,s);return(0,t.jsx)(f.Presence,{present:a||C(n.state)||!0===n.state,children:(0,t.jsx)(h.Primitive.span,{"data-state":S(n.state),"data-disabled":n.disabled?"":void 0,...i,ref:r,style:{pointerEvents:"none",...e.style}})})});k.displayName=N;var w=e=>{let{control:s,checked:a,bubbles:i=!0,defaultChecked:n,...l}=e,o=r.useRef(null),c=(0,m.usePrevious)(a),d=(0,p.useSize)(s);r.useEffect(()=>{let e=o.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==a&&t){let r=new Event("click",{bubbles:i});e.indeterminate=C(a),t.call(e,!C(a)&&a),e.dispatchEvent(r)}},[c,a,i]);let u=r.useRef(!C(a)&&a);return(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n??u.current,...l,tabIndex:-1,ref:o,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function C(e){return"indeterminate"===e}function S(e){return C(e)?"indeterminate":e?"checked":"unchecked"}var T=e.i(78784),E=e.i(47163);function A({className:e,...r}){return(0,t.jsx)(j,{"data-slot":"checkbox",className:(0,E.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...r,children:(0,t.jsx)(k,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,t.jsx)(T.CheckIcon,{className:"size-3.5"})})})}var O=e.i(7233),_=e.i(27612);let I=(0,e.i(75254).default)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var P=e.i(63209),M=e.i(20682),L=e.i(19036);function R({initialData:e,isEdit:o}){let[c,d]=(0,r.useState)([]),[u,m]=(0,r.useState)(!1),[p,f]=(0,r.useState)(e?.title||""),[h,x]=(0,r.useState)(e?.start_time?new Date(e.start_time).toISOString().slice(0,16):""),[g,v]=(0,r.useState)(e?.end_time?new Date(e.end_time).toISOString().slice(0,16):""),[b,y]=(0,r.useState)(e?.correct_marks||10),[j,N]=(0,r.useState)(e?.time_per_word||30),[k,w]=(0,r.useState)(e?.word_count||5),[C,S]=(0,r.useState)(e?.difficulty||"medium"),[T,E]=(0,r.useState)(e?.is_active===void 0||e.is_active),[R,D]=(0,r.useState)(Array.isArray(e?.subjects)?e.subjects:[]),[$,F]=(0,r.useState)(Array.isArray(e?.stages)?e.stages:[]),[U,H]=(0,r.useState)(Array.isArray(e?.stages)&&e.stages.length>0),G=(0,s.useRouter)(),{toast:z}=(0,M.useToast)();(0,r.useEffect)(()=>{(async()=>{let e=localStorage.getItem("admin_token");try{let t=await fetch("/api/admin/subjects",{headers:{Authorization:`Bearer ${e}`}}),r=await t.json();d(Array.isArray(r)?r:[])}catch(e){console.error("Failed to fetch subjects",e),d([])}})()},[]);let W=(e,t,r)=>{let s=[...$];s[e]={...s[e],[t]:r},F(s)},B=(e,t)=>{if("game"===t)D(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]);else{let r=[...$],s=r[t].subjects;r[t].subjects=s.includes(e)?s.filter(t=>t!==e):[...s,e],F(r)}},V=async t=>{if(t.preventDefault(),!p||!b)return void z({variant:"destructive",title:"Validation Error",description:"Title and marks are mandatory."});m(!0);let r=localStorage.getItem("admin_token"),s={title:p,start_time:h||null,end_time:g||null,correct_marks:Number(b),time_per_word:Number(j),word_count:Number(k),difficulty:C,is_active:T,subjects:U?[]:R,stages:U?$:[]};try{let t=o?`/api/admin/games/${e.id}`:"/api/admin/games",a=await fetch(t,{method:o?"PATCH":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(s)});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to save game")}z({title:"Success",description:`Game ${o?"updated":"created"} successfully.`}),G.push("/admin/games")}catch(e){z({variant:"destructive",title:"Error",description:e.message})}finally{m(!1)}};return(0,t.jsxs)("form",{onSubmit:V,className:"space-y-8 max-w-4xl mx-auto pb-12",children:[(0,t.jsxs)(l.Card,{children:[(0,t.jsxs)(l.CardHeader,{children:[(0,t.jsx)(l.CardTitle,{children:o?"Edit Game":"Create New Game"}),(0,t.jsx)(l.CardDescription,{children:"Configure basic game settings and rules."})]}),(0,t.jsxs)(l.CardContent,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"title",children:"Game Title *"}),(0,t.jsx)(i.Input,{id:"title",value:p,onChange:e=>f(e.target.value),placeholder:"e.g. Weekly Challenge #1",required:!0})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 sm:pt-8",children:[(0,t.jsx)(L.Switch,{id:"active",checked:T,onCheckedChange:E}),(0,t.jsx)(n.Label,{htmlFor:"active",children:"Game Active"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"marks",children:"Correct Answer Marks *"}),(0,t.jsx)(i.Input,{id:"marks",type:"number",value:b,onChange:e=>y(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"time",children:"Time per Word (seconds)"}),(0,t.jsx)(i.Input,{id:"time",type:"number",value:j,onChange:e=>N(e.target.value)})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"start",children:"Start Date & Time (Optional)"}),(0,t.jsx)(i.Input,{id:"start",type:"datetime-local",value:h,onChange:e=>x(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"end",children:"End Date & Time (Optional)"}),(0,t.jsx)(i.Input,{id:"end",type:"datetime-local",value:g,onChange:e=>v(e.target.value)})]})]})]})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(l.CardHeader,{children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(l.CardTitle,{children:"Game Structure"}),(0,t.jsx)(l.CardDescription,{children:U?"Configure multiple stages for this game.":"Select subjects for a single-level game."})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(n.Label,{htmlFor:"has-stages",children:"Enable Stages"}),(0,t.jsx)(L.Switch,{id:"has-stages",checked:U,onCheckedChange:H})]})]})}),(0,t.jsx)(l.CardContent,{className:"space-y-6",children:U?(0,t.jsxs)("div",{className:"space-y-6",children:[$.map((e,r)=>(0,t.jsxs)("div",{className:"relative border rounded-lg p-4 bg-muted/30 space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(I,{className:"h-5 w-5 text-muted-foreground"}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)(n.Label,{children:["Stage ",r+1," Title"]}),(0,t.jsx)(i.Input,{value:e.title,onChange:e=>W(r,"title",e.target.value),className:"h-8 w-64"})]})]}),(0,t.jsx)(a.Button,{variant:"ghost",size:"icon",className:"text-destructive",onClick:()=>{F($.filter((e,t)=>t!==r))},children:(0,t.jsx)(_.Trash2,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{className:"text-xs",children:"Word Count"}),(0,t.jsx)(i.Input,{type:"number",value:e.word_count,onChange:e=>W(r,"word_count",e.target.value),className:"h-8"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{className:"text-xs",children:"Difficulty"}),(0,t.jsxs)("select",{value:e.difficulty,onChange:e=>W(r,"difficulty",e.target.value),className:"flex h-8 w-full rounded-md border border-input bg-background px-3 py-1 text-xs ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:[(0,t.jsx)("option",{value:"easy",children:"Easy"}),(0,t.jsx)("option",{value:"medium",children:"Medium"}),(0,t.jsx)("option",{value:"hard",children:"Hard"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{className:"text-xs",children:"Stage Subjects"}),(0,t.jsx)("div",{className:"border rounded-md p-3 max-h-40 overflow-y-auto bg-background",children:c.map(s=>(0,t.jsxs)("div",{className:"flex items-center space-x-2 py-1",children:[(0,t.jsx)(A,{id:`stage-${r}-subject-${s.id}`,checked:e.subjects.includes(s.id),onCheckedChange:()=>B(s.id,r)}),(0,t.jsx)(n.Label,{htmlFor:`stage-${r}-subject-${s.id}`,className:"text-xs font-normal cursor-pointer",children:s.name})]},s.id))})]})]})]},r)),(0,t.jsxs)(a.Button,{type:"button",variant:"outline",className:"w-full border-dashed",onClick:()=>{F([...$,{title:`Stage ${$.length+1}`,subjects:[],word_count:5,difficulty:"medium"}])},children:[(0,t.jsx)(O.Plus,{className:"mr-2 h-4 w-4"})," Add Stage"]})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"game-word-count",children:"Number of Words to Play"}),(0,t.jsx)(i.Input,{id:"game-word-count",type:"number",value:k,onChange:e=>w(e.target.value),min:"1"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"game-difficulty",children:"Difficulty"}),(0,t.jsxs)("select",{id:"game-difficulty",value:C,onChange:e=>S(e.target.value),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:[(0,t.jsx)("option",{value:"easy",children:"Easy"}),(0,t.jsx)("option",{value:"medium",children:"Medium"}),(0,t.jsx)("option",{value:"hard",children:"Hard"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(n.Label,{children:"Select Subjects"}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 border rounded-md p-4 max-h-60 overflow-y-auto",children:c.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(A,{id:`subject-${e.id}`,checked:R.includes(e.id),onCheckedChange:()=>B(e.id,"game")}),(0,t.jsx)(n.Label,{htmlFor:`subject-${e.id}`,className:"text-sm font-normal cursor-pointer",children:e.name})]},e.id))}),0===R.length&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,t.jsx)(P.AlertCircle,{className:"h-3 w-3"})," Please select at least one subject."]})]})]})})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,t.jsx)(a.Button,{type:"button",variant:"outline",onClick:()=>G.push("/admin/games"),children:"Cancel"}),(0,t.jsx)(a.Button,{type:"submit",disabled:u,children:u?"Saving...":o?"Update Game":"Create Game"})]})]})}e.s(["GameForm",()=>R],29728)},7006,e=>{"use strict";var t=e.i(43476),r=e.i(29946),s=e.i(11522),a=e.i(29728),i=e.i(7151);function n(){return(0,t.jsxs)(s.SidebarProvider,{children:[(0,t.jsx)(r.AdminNav,{}),(0,t.jsxs)(s.SidebarInset,{children:[(0,t.jsxs)("header",{className:"flex h-16 shrink-0 items-center gap-2 border-b px-4",children:[(0,t.jsx)(s.SidebarTrigger,{className:"-ml-1"}),(0,t.jsx)("h1",{className:"text-xl font-bold",children:"Create New Game"})]}),(0,t.jsxs)("main",{className:"p-6",children:[(0,t.jsx)(a.GameForm,{}),(0,t.jsx)(i.AdminFooter,{})]})]})]})}e.s(["default",()=>n])}]);